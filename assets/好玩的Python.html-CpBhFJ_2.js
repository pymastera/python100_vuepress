import{_ as n,c as s,a as i,o as a}from"./app-D-bq_jAa.js";const l="/assets/requests-DepontEb.png",t={};function r(d,e){return a(),s("div",null,e[0]||(e[0]=[i(`<h2 id="好玩的python" tabindex="-1"><a class="header-anchor" href="#好玩的python"><span>好玩的Python</span></a></h2><p>因为下面的代码都非常简单，简单到直接使用Python的交互式环境就能完成。当然，官方Python自带的交互式环境比较难用，推荐大家使用ipython，可以使用下面的命令来安装ipython，安装成功后键入ipython命令就能进入交互式环境。</p><div class="language-Shell line-numbers-mode" data-highlighter="prismjs" data-ext="Shell" data-title="Shell"><pre><code><span class="line">pip install ipython</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或</p><div class="language-Shell line-numbers-mode" data-highlighter="prismjs" data-ext="Shell" data-title="Shell"><pre><code><span class="line">pip3 install ipython</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ipython最直观的优点：</p><ol><li>可以用?或者??来获取帮助。</li><li>可以用!调用系统命令。</li><li>可以使用Tab键自动补全。</li><li>可以使用魔法指令，如：%timeit。</li></ol><h3 id="没有工具用代码也能p图" tabindex="-1"><a class="header-anchor" href="#没有工具用代码也能p图"><span>没有工具用代码也能P图</span></a></h3><ol><li><p>安装pillow三方库。</p><p>PIL（Python Imaging Library）是Python平台事实上的图像处理标准库了。PIL功能非常强大，而API却非常简单易用。但是PIL仅支持到Python 2.7，而且很多年都没有人维护了，于是一群志愿者在PIL的基础上创建了兼容的版本，名字叫<a href="https://github.com/python-pillow/Pillow" target="_blank" rel="noopener noreferrer">Pillow</a>，除了支持Python 3.x还加入了很多有用且有趣的新特性。</p><div class="language-Shell line-numbers-mode" data-highlighter="prismjs" data-ext="Shell" data-title="Shell"><pre><code><span class="line">pip install pillow</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或</p><div class="language-Shell line-numbers-mode" data-highlighter="prismjs" data-ext="Shell" data-title="Shell"><pre><code><span class="line">pip3 install pillow</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>加载图片。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">from PIL import Image</span>
<span class="line"></span>
<span class="line">chiling = Image.open(&#39;chiling.jpg&#39;)</span>
<span class="line">chiling.show()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用滤镜。</p><div class="language-Shell line-numbers-mode" data-highlighter="prismjs" data-ext="Shell" data-title="Shell"><pre><code><span class="line">from PIL import ImageFilter</span>
<span class="line"></span>
<span class="line">chiling.filter(ImageFilter.EMBOSS).show()</span>
<span class="line">chiling.filter(ImageFilter.CONTOUR).show()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>图像剪裁和粘贴。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">rect = 220, 690, 265, 740 </span>
<span class="line">watch = chiling.crop(rect)</span>
<span class="line">watch.show()</span>
<span class="line">blured_watch = watch.filter(ImageFilter.GaussianBlur(4))</span>
<span class="line">chiling.paste(blured_watch, (220, 690))</span>
<span class="line">chiling.show()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>生成镜像。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">chiling2 = chiling.transpose(Image.FLIP_LEFT_RIGHT)</span>
<span class="line">chiling2.show()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>生成缩略图。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">width, height = chiling.size</span>
<span class="line">width, height = int(width * 0.4), int(height * 0.4)</span>
<span class="line">chiling.thumbnail((width, height))</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>合成图片。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">frame = Image.open(&#39;frame.jpg&#39;)</span>
<span class="line">frame.show()</span>
<span class="line">frame.paste(chiling, (210, 150))</span>
<span class="line">frame.paste(chiling2, (522, 150))</span>
<span class="line">frame.show()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>上面的知识在<a href="https://github.com/jackfrued/Python-100-Days" target="_blank" rel="noopener noreferrer">Python-100-Days</a>项目的<a href="https://github.com/jackfrued/Python-100-Days/blob/master/Day01-15/15.%E5%9B%BE%E5%83%8F%E5%92%8C%E5%8A%9E%E5%85%AC%E6%96%87%E6%A1%A3%E5%A4%84%E7%90%86.md" target="_blank" rel="noopener noreferrer">第15天</a>中也有对应的内容。</p><h3 id="向微信好友群发祝福视频" tabindex="-1"><a class="header-anchor" href="#向微信好友群发祝福视频"><span>向微信好友群发祝福视频</span></a></h3><ol><li><p>安装itchat三方库。</p><p><a href="https://itchat.readthedocs.io/zh/latest/" target="_blank" rel="noopener noreferrer">itchat</a>是一个开源的微信个人号接口，使用Python调用微信从未如此简单。</p><div class="language-Shell line-numbers-mode" data-highlighter="prismjs" data-ext="Shell" data-title="Shell"><pre><code><span class="line">pip install itchat</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或</p><div class="language-Shell line-numbers-mode" data-highlighter="prismjs" data-ext="Shell" data-title="Shell"><pre><code><span class="line">pip3 install itchat</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>登录微信。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">import itchat</span>
<span class="line"></span>
<span class="line">itchat.auto_login()</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>说明：用自己的微信扫描屏幕上出现的二维码就完成了登录操作，登录之后才能获取自己的好友信息以及发送消息给自己的好友。</p></blockquote></li><li><p>查找自己的朋友。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">friends_list = itchat.get_friends(update=True)</span>
<span class="line">print(len(friends_list))</span>
<span class="line">luohao = friends_list[0]</span>
<span class="line">props = [&#39;NickName&#39;, &#39;Signature&#39;, &#39;Sex&#39;]</span>
<span class="line">for prop in props:</span>
<span class="line">    print(luohao[prop])</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>说明：friends_list相当于是一个列表，列表中的第一个元素是自己。</p></blockquote></li><li><p>随机选出5个朋友，获得他们的用户名、昵称、签名。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">lucky_friends = random.sample(friends_list[1:], 5) </span>
<span class="line">props = [&#39;NickName&#39;, &#39;Signature&#39;, &#39;City&#39;]</span>
<span class="line">for friend in lucky_friends:</span>
<span class="line">    for prop in props:</span>
<span class="line">        print(friend[prop] or &#39;没有此项信息&#39;)    </span>
<span class="line">    print(&#39;-&#39; * 80)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>给朋友发送文字消息。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">itchat.send_msg(&#39;急需一个红包来拯救堕落的灵魂！！！&#39;, toUserName=&#39;@8e06606db03f0e28d0ff884083f727e6&#39;)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>群发视频给幸运的朋友们。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">lucky_friends = random.sample(friends_list[1:], 5) </span>
<span class="line">for friend in lucky_friends:</span>
<span class="line">    username = friend[&#39;UserName&#39;]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>利用itchat还能做很多事情，比如有好友给自己发了消息又撤回了，如果想查看这些被撤回的消息，itchat就可以做到（注册一个接收消息的钩子函数，请参考<a href="https://blog.csdn.net/enweitech/article/details/79585043" target="_blank" rel="noopener noreferrer">CSDN上的一篇文章</a>）；再比如，有时候我们想知道某个好友有没有把我们删除或者拉入黑名单，也可以利用itchat封装的群聊功能，非好友和黑名单用户不会被拉入群聊，通过创建群聊函数的返回值就可以判定你和指定的人之间的关系。</p><h3 id="不用客户端查看热点新闻" tabindex="-1"><a class="header-anchor" href="#不用客户端查看热点新闻"><span>不用客户端查看热点新闻</span></a></h3><ol><li><p>安装requests库。（点击常看<a href="https://2.python-requests.org/zh_CN/latest/" target="_blank" rel="noopener noreferrer">官方文档</a>）</p><p><img src="`+l+`" alt=""></p><div class="language-Shell line-numbers-mode" data-highlighter="prismjs" data-ext="Shell" data-title="Shell"><pre><code><span class="line">pip install requests</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或</p><div class="language-Shell line-numbers-mode" data-highlighter="prismjs" data-ext="Shell" data-title="Shell"><pre><code><span class="line">pip3 install requests</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>爬取新闻数据或者通过API接口获取新闻数据。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">import requests</span>
<span class="line"></span>
<span class="line">resp = requests.get(&#39;http://api.tianapi.com/allnews/?key=请使用自己申请的Key&amp;col=7&amp;num=50&#39;)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>说明：上面使用了天行数据提供的数据接口，需要的话可以自行去<a href="https://www.tianapi.com/" target="_blank" rel="noopener noreferrer">天行数据</a>的网站注册开通，调用接口的时候要填写注册成功后系统分配给你的key。</p></blockquote></li><li><p>使用反序列化将JSON字符串解析为字典并获取新闻列表。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">import json</span>
<span class="line"></span>
<span class="line">newslist = json.loads(resp.text)[&#39;newslist&#39;]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>对新闻列表进行循环遍历，找到感兴趣的新闻，例如：华为。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">for news in newslist:</span>
<span class="line">    title = news[&#39;title&#39;]</span>
<span class="line">    url = news[&#39;url&#39;]</span>
<span class="line">    if &#39;华为&#39; in title:</span>
<span class="line">        print(title)</span>
<span class="line">        print(url)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>调用短信网关发送短信到手机上，告知关注的新闻标题并给出链接。</p><div class="language-Python line-numbers-mode" data-highlighter="prismjs" data-ext="Python" data-title="Python"><pre><code><span class="line">import re</span>
<span class="line"></span>
<span class="line">pattern = re.compile(r&#39;https*:\\/\\/[^\\/]*\\/(?P&lt;url&gt;.*)&#39;) </span>
<span class="line">matcher = pattern.match(url)</span>
<span class="line"></span>
<span class="line">if matcher:</span>
<span class="line">    url = matcher.group(&#39;url&#39;)</span>
<span class="line">    resp = requests.post(</span>
<span class="line">        url=&#39;http://sms-api.luosimao.com/v1/send.json&#39;,</span>
<span class="line">        auth=(&#39;api&#39;, &#39;key-请使用你自己申请的Key&#39;),</span>
<span class="line">        data={</span>
<span class="line">            &#39;mobile&#39;: &#39;13548041193&#39;,</span>
<span class="line">            &#39;message&#39;: f&#39;发现一条您可能感兴趣的新闻 - {title}，详情点击https://news.china.com/{url} 查看。【Python小课】&#39;</span>
<span class="line">        },</span>
<span class="line">        timeout=10,</span>
<span class="line">        verify=False</span>
<span class="line">    )</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>说明：上面的代码使用了<a href="https://luosimao.com/" target="_blank" rel="noopener noreferrer">螺丝帽</a>提供的短信网关服务，利用短信网关发送短信是需要支付费用的，但是一般的平台都会提供若干条免费的测试短信。发送短信必须遵守平台的规则，违规的短信是无法发送的。上面发短信时使用的短信模板（“发现一条您可能感兴趣的新闻 - ###，详情点击https://news.china.com/### 查看。”）和短信签名（“【Python小课】”）需要登录螺丝帽管理平台进行配置，如果不清楚如何配置，可以联系平台的客服人员进行咨询。</p></blockquote></li></ol>`,15)]))}const c=n(t,[["render",r],["__file","好玩的Python.html.vue"]]),o=JSON.parse('{"path":"/%E5%85%AC%E5%BC%80%E8%AF%BE/%E6%96%87%E6%A1%A3/%E7%AC%AC04%E6%AC%A1%E5%85%AC%E5%BC%80%E8%AF%BE-%E5%A5%BD%E7%8E%A9%E7%9A%84Python/%E5%A5%BD%E7%8E%A9%E7%9A%84Python.html","title":"","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"好玩的Python","slug":"好玩的python","link":"#好玩的python","children":[{"level":3,"title":"没有工具用代码也能P图","slug":"没有工具用代码也能p图","link":"#没有工具用代码也能p图","children":[]},{"level":3,"title":"向微信好友群发祝福视频","slug":"向微信好友群发祝福视频","link":"#向微信好友群发祝福视频","children":[]},{"level":3,"title":"不用客户端查看热点新闻","slug":"不用客户端查看热点新闻","link":"#不用客户端查看热点新闻","children":[]}]}],"git":{"updatedTime":null,"contributors":[]},"filePathRelative":"公开课/文档/第04次公开课-好玩的Python/好玩的Python.md"}');export{c as comp,o as data};
